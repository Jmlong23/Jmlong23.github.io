<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>基于区块链的投票系统 - topLOW的博客</title><meta description="知识背景truffle快速开始： https:&amp;#x2F;&amp;#x2F;learnblockchain.cn&amp;#x2F;docs&amp;#x2F;truffle&amp;#x2F;quickstart.html web3js https:&amp;#x2F;&amp;#x2F;learnblockchain.cn&amp;#x2F;docs&amp;#x2F;web3.js&amp;#x2F;web3-eth-contract.html#methods-mymethod-send solidity https:&amp;#x2F;&amp;#x2F;learnblockchain.cn"><meta property="og:type" content="blog"><meta property="og:title" content="基于区块链的投票系统"><meta property="og:url" content="https://sanguocloud.cn/2021/01/20/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E6%8A%95%E7%A5%A8%E7%B3%BB%E7%BB%9F-md/"><meta property="og:site_name" content="topLOW的博客"><meta property="og:description" content="知识背景truffle快速开始： https:&amp;#x2F;&amp;#x2F;learnblockchain.cn&amp;#x2F;docs&amp;#x2F;truffle&amp;#x2F;quickstart.html web3js https:&amp;#x2F;&amp;#x2F;learnblockchain.cn&amp;#x2F;docs&amp;#x2F;web3.js&amp;#x2F;web3-eth-contract.html#methods-mymethod-send solidity https:&amp;#x2F;&amp;#x2F;learnblockchain.cn"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://sanguocloud.cn/img/og_image.png"><meta property="article:published_time" content="2021-01-20T04:54:24.000Z"><meta property="article:modified_time" content="2021-04-09T15:54:48.039Z"><meta property="article:author" content="long"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://sanguocloud.cn/2021/01/20/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E6%8A%95%E7%A5%A8%E7%B3%BB%E7%BB%9F-md/"},"headline":"topLOW的博客","image":["https://sanguocloud.cn/img/og_image.png"],"datePublished":"2021-01-20T04:54:24.000Z","dateModified":"2021-04-09T15:54:48.039Z","author":{"@type":"Person","name":"long"},"description":"知识背景truffle快速开始： https:&#x2F;&#x2F;learnblockchain.cn&#x2F;docs&#x2F;truffle&#x2F;quickstart.html web3js https:&#x2F;&#x2F;learnblockchain.cn&#x2F;docs&#x2F;web3.js&#x2F;web3-eth-contract.html#methods-mymethod-send solidity https:&#x2F;&#x2F;learnblockchain.cn"}</script><link rel="canonical" href="https://sanguocloud.cn/2021/01/20/%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E6%8A%95%E7%A5%A8%E7%B3%BB%E7%BB%9F-md/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="topLOW的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">目录</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2021-01-20T04:54:24.000Z" title="2021-01-20T04:54:24.000Z">2021-01-20</time><span class="level-item"><a class="link-muted" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></span><span class="level-item">14 分钟 读完 (大约 2144 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">基于区块链的投票系统</h1><div class="content"><h1 id="知识背景"><a href="#知识背景" class="headerlink" title="知识背景"></a>知识背景</h1><p>truffle快速开始：</p>
<p><a href="https://learnblockchain.cn/docs/truffle/quickstart.html">https://learnblockchain.cn/docs/truffle/quickstart.html</a></p>
<p>web3js</p>
<p><a href="https://learnblockchain.cn/docs/web3.js/web3-eth-contract.html#methods-mymethod-send">https://learnblockchain.cn/docs/web3.js/web3-eth-contract.html#methods-mymethod-send</a></p>
<p>solidity</p>
<p><a href="https://learnblockchain.cn/docs/solidity/">https://learnblockchain.cn/docs/solidity/</a></p>
<h1 id="基于truffle框架的投票DAPP"><a href="#基于truffle框架的投票DAPP" class="headerlink" title="基于truffle框架的投票DAPP"></a>基于truffle框架的投票DAPP</h1><h2 id="安装truffle"><a href="#安装truffle" class="headerlink" title="安装truffle"></a>安装truffle</h2><p>sudo npm install -g truffle</p>
<p><strong>安装过程中可能会报错，如果报错则执行如下命令升级nodejs</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g n</span><br><span class="line">sudo n stable</span><br></pre></td></tr></table></figure>

<ul>
<li>truffle安装完成后用如下命令检查：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truffle -v</span><br></pre></td></tr></table></figure>

<h2 id="创建项目工程"><a href="#创建项目工程" class="headerlink" title="创建项目工程"></a>创建项目工程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truffle unbox webpack</span><br></pre></td></tr></table></figure>

<ul>
<li>配置truffle_config.js文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">networks下：</span><br><span class="line">    development: &#123;</span><br><span class="line">     host: &quot;127.0.0.1&quot;,     &#x2F;&#x2F; Localhost (default: none)</span><br><span class="line">     port: 8545,            &#x2F;&#x2F; Standard Ethereum port (default: none)</span><br><span class="line">     network_id: &quot;*&quot;,       &#x2F;&#x2F; Any network (default: none)</span><br><span class="line">     gas: 470000</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>将 2_deploy_contracts.js 的内容更新为以下信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Voting &#x3D; artifacts.require(&quot;.&#x2F;Voting.sol&quot;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; function(deployer) &#123;</span><br><span class="line">  deployer.deploy(Voting, [web3.utils.toHex(&#39;Alice&#39;),web3.utils.toHex(&#39;Trump&#39;)]); &#x2F;&#x2F;转十六进制</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="启动测试链ganache"><a href="#启动测试链ganache" class="headerlink" title="启动测试链ganache"></a>启动测试链ganache</h2><p><a href="https://www.trufflesuite.com/docs/ganache/workspaces/ethereum-workspace-overview">https://www.trufflesuite.com/docs/ganache/workspaces/ethereum-workspace-overview</a></p>
<p><a href="https://blog.csdn.net/qq_20513027/article/details/85041353">https://blog.csdn.net/qq_20513027/article/details/85041353</a><br>1）输入</p>
<p>sudo npm install -g ganache-cli<br>2）启动</p>
<p>ganache-cli</p>
<h2 id="编译部署"><a href="#编译部署" class="headerlink" title="编译部署"></a>编译部署</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">truffle compile</span><br><span class="line">truffle migrate</span><br></pre></td></tr></table></figure>



<h2 id="控制台交互"><a href="#控制台交互" class="headerlink" title="控制台交互"></a>控制台交互</h2><p>Voting.deployed().then(function(contractInstance){contractInstance.voteForCandidate(web3.utils.toHex(‘Bob’)).then(function(v) {console.log(v)})}) </p>
<p>Voting.deployed().then(function(contractInstance) {contractInstance.totalVotesFor.call(web3.utils.toHex(‘Alice’)).then(function(v) {console.log(v.toString())})}) </p>
<h2 id="网页交互"><a href="#网页交互" class="headerlink" title="网页交互"></a>网页交互</h2><p><a href="https://www.jianshu.com/p/f8d41a5d909d">https://www.jianshu.com/p/f8d41a5d909d</a></p>
<p><a href="https://myblog.gumptlu.work/2020/08/23/%E6%8A%80%E6%9C%AF%E8%B4%B4/%E5%8C%BA%E5%9D%97%E9%93%BE/truffle%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AD%A6%E4%B9%A0/">https://myblog.gumptlu.work/2020/08/23/%E6%8A%80%E6%9C%AF%E8%B4%B4/%E5%8C%BA%E5%9D%97%E9%93%BE/truffle%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AD%A6%E4%B9%A0/</a></p>
<p><a href="https://github.com/truffle-box/webpack-box">https://github.com/truffle-box/webpack-box</a></p>
<p>npm run dev报错很有可能启动需要的依赖包没有安装，安装的方式是在项目文件夹下：</p>
<p>npm install</p>
<h1 id="geth命令"><a href="#geth命令" class="headerlink" title="geth命令"></a>geth命令</h1><p>eth.getBalance(eth.accounts[1])</p>
<ul>
<li>导入账户</li>
</ul>
<p>personal.importRawKey(“3b2e3e081c5450a25e4a859b5a5db70f6e0291cb87b2596b4739485132825883”,”jkslks5965”)</p>
<ul>
<li>解锁：* </li>
</ul>
<p>personal.unlockAccount(eth.accounts[0],”123456”, 600000)</p>
<p>eth.sendTransaction({from: eth.accounts[1],gasPrice: “20000000000”,gas: “21000”,to: eth.accounts[0],value: “1000000000000000000”,data: “”}, ‘jkslks5965’)</p>
<p>eth.sendTransaction({from: “0x1544b84b06ace59dcac798f2eca6b9577bafd612”,to: “0x52e04f1b40891060beb72ea09d2b873bdb7ea7cb”,value: ‘1000000000000000000’})</p>
<p>eth.sendTransaction({from: eth.accounts[0],to: eth.accounts[2],amount})</p>
<ul>
<li>设置以太</li>
</ul>
<p>amount = web3.toWei(2,’ether’)</p>
<p>eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[1], value: amount})</p>
<p>eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[1], value: web3.toWei(10,’ether’)})</p>
<ul>
<li>交易完成后，要挖矿才可以交易成功</li>
</ul>
<ul>
<li>解锁账户</li>
</ul>
<p>web3.eth.personal.unlockAccount(‘0x1544b84B06ace59DcAc798f2Eca6B9577BAfD612’,’123456’,300000)</p>
<h1 id="使用fabric-samples测试网络环境配置"><a href="#使用fabric-samples测试网络环境配置" class="headerlink" title="使用fabric-samples测试网络环境配置"></a>使用fabric-samples测试网络环境配置</h1><a id="more"></a>

<p>由于网络问题，自行下载三个包</p>
<p><a href="https://pan.baidu.com/s/1-zq-MJlIb0Etn_8O0nT10w#list/path=%2F">https://pan.baidu.com/s/1-zq-MJlIb0Etn_8O0nT10w#list/path=%2F</a></p>
<p>提取码：zn0v</p>
<p><a href="https://zhuanlan.zhihu.com/p/158381955">https://zhuanlan.zhihu.com/p/158381955</a></p>
<p>遇到错误</p>
<p>ERROR! Peer binary and configuration files not found..</p>
<p><a href="https://www.codenong.com/cs106355725/">https://www.codenong.com/cs106355725/</a></p>
<p>官方地址</p>
<p><a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/install.html">https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/install.html</a></p>
<h1 id="使用Fabric的测试网络"><a href="#使用Fabric的测试网络" class="headerlink" title="使用Fabric的测试网络"></a>使用Fabric的测试网络</h1><p>官方地址：</p>
<p><a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/test_network.html#">https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/test_network.html#</a></p>
<p>相关博客：</p>
<p><a href="https://my.oschina.net/zfjian/blog/4943514">https://my.oschina.net/zfjian/blog/4943514</a></p>
<p><a href="https://blog.csdn.net/ngums/article/details/109170721">https://blog.csdn.net/ngums/article/details/109170721</a></p>
<h1 id="将智能合约部署到渠道"><a href="#将智能合约部署到渠道" class="headerlink" title="将智能合约部署到渠道"></a>将智能合约部署到渠道</h1><p><a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/deploy_chaincode.html#install-the-chaincode-package">https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/deploy_chaincode.html#install-the-chaincode-package</a></p>
<p>go mod有错误，改成go mod download，再go mod vendor</p>
<p>org1和org2的环境变量需分开配置</p>
<h1 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h1><p><a href="https://cloud.tencent.com/document/product/213/38237">https://cloud.tencent.com/document/product/213/38237</a></p>
<p><strong>方法二：使用代理registry</strong></p>
<p>在网上查阅了一些资料后，决定使用代理的方式，方法也很简单，就是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure>



<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>在项目目录中创建如下目录</p>
<p>mkdir contracts<br>mkdir scripts<br>mkdir compiled<br>mkdir tests </p>
<p>安装依赖</p>
<p>npm install solc @0.4.25</p>
<p>npm list  fs-extra //查看版本信息</p>
<p>合约</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.22; </span><br><span class="line"> </span><br><span class="line">contract Voting &#123; </span><br><span class="line"> mapping (bytes32 &#x3D;&gt; uint8) public votesReceived;   </span><br><span class="line"> bytes32[] public candidateList;    constructor(bytes32[] candidateNames) public &#123; </span><br><span class="line">  candidateList &#x3D; candidateNames;   </span><br><span class="line"> &#125;    function totalVotesFor(bytes32 candidate) view public returns (uint8) &#123; </span><br><span class="line">   require(validCandidate(candidate));     </span><br><span class="line">  return votesReceived[candidate];   </span><br><span class="line"> &#125; </span><br><span class="line"> function voteForCandidate(bytes32 candidate) public &#123; </span><br><span class="line">      require(validCandidate(candidate));     </span><br><span class="line">  votesReceived[candidate]  +&#x3D; 1; </span><br><span class="line"> &#125;    function validCandidate(bytes32 candidate) view public returns (bool) &#123; </span><br><span class="line">  for(uint i &#x3D; 0; i &lt; candidateList.length; i++) &#123; </span><br><span class="line">   if (candidateList[i] &#x3D;&#x3D; candidate) &#123; </span><br><span class="line">           return true;  </span><br><span class="line">           &#125;     </span><br><span class="line">  &#125;     </span><br><span class="line">  return false;    </span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>编译脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const fs &#x3D; require(&#39;fs-extra&#39;);  </span><br><span class="line">const path &#x3D; require(&#39;path&#39;);  </span><br><span class="line">const solc &#x3D; require(&#39;solc&#39;);  </span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; cleanup  </span><br><span class="line">const compiledDir &#x3D; path.resolve(__dirname, &#39;..&#x2F;compiled&#39;); </span><br><span class="line">fs.removeSync(compiledDir);  </span><br><span class="line">fs.ensureDirSync(compiledDir); </span><br><span class="line">&#x2F;&#x2F; compile </span><br><span class="line">const contractPath &#x3D; path.resolve(__dirname,  </span><br><span class="line">    &#39;..&#x2F;contracts&#39;, &#39;Voting.sol&#39;);  </span><br><span class="line">const contractSource &#x3D; fs.readFileSync(contractPath, &#39;utf8&#39;);  </span><br><span class="line">const result &#x3D; solc.compile(contractSource, 1);  </span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; check errors  </span><br><span class="line">if (Array.isArray(result.errors) &amp;&amp; result.errors.length) &#123; </span><br><span class="line"> throw new Error(result.errors[0]);  </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; save to disk  </span><br><span class="line">Object.keys(result.contracts).forEach(name &#x3D;&gt; &#123;  </span><br><span class="line">const contractName &#x3D; name.replace(&#x2F;^:&#x2F;, &#39;&#39;);  </span><br><span class="line">const filePath &#x3D; path.resolve(compiledDir,  </span><br><span class="line">    &#96;$&#123;contractName&#125;.json&#96;);  </span><br><span class="line">fs.outputJsonSync(filePath, result.contracts[name]);  </span><br><span class="line">console.log(&#96;save compiled contract $&#123;contractName&#125; to  </span><br><span class="line">  $&#123;filePath&#125;&#96;); &#125;);</span><br></pre></td></tr></table></figure>

<p>编译命令</p>
<p>node ./scripts/compile.js</p>
<h1 id="用truffle构建简单dapp"><a href="#用truffle构建简单dapp" class="headerlink" title="用truffle构建简单dapp"></a>用truffle构建简单dapp</h1><h2 id="连接到私链的控制台"><a href="#连接到私链的控制台" class="headerlink" title="连接到私链的控制台"></a>连接到私链的控制台</h2><p>Geth<br>Version: 1.8.0-stable</p>
<ul>
<li>搭建私链文件genesis.json<br>{<pre><code>&quot;config&quot;: {
         &quot;chainId&quot;: 15     
},     
&quot;difficulty&quot;: &quot;1800&quot;,     
&quot;gasLimit&quot;: &quot;2100000&quot;,     
&quot;alloc&quot;: {
    &quot;0x52e04F1b40891060bEB72ea09d2B873bdb7ea7CB&quot;: { &quot;balance&quot;: &quot;30000000000000000000000&quot; }
}</code></pre>}</li>
</ul>
<p>geth attach <a href="http://127.0.0.1:8545">http://127.0.0.1:8545</a></p>
<ul>
<li>查看日志</li>
</ul>
<p>tail -f output.log</p>
<ul>
<li>查看geth</li>
</ul>
<p>ps -ef | grep geth</p>
<ul>
<li>初始化私链</li>
</ul>
<p>geth –datadir . init genesis.json </p>
<ul>
<li>启动私链</li>
</ul>
<p>nohup geth –datadir . –networkid 15 –rpc –rpcapi db,eth,net,web3,personal,miner  –rpcport 8545 –rpcaddr 127.0.0.1 –rpccorsdomain “*” 2&gt;output.log &amp; </p>
<p>nohup geth –datadir . –networkid 16 –rpc –rpcapi db,eth,net,web3,personal,miner  –rpcport 8545 –rpcaddr 127.0.0.1 –rpccorsdomain “*” 2&gt;output.log &amp; </p>
<p>nohup geth –datadir . –dev.period=1 –networkid 15 –rpc –rpcapi db,eth,net,web3,personal,miner  –rpcport 8545 –rpcaddr 127.0.0.1 –allow-insecure-unlock –rpccorsdomain “*” 2&gt;output.log &amp; </p>
<p>nohup geth –datadir . –dev.period=1 –networkid 16 –rpc –rpcapi db,eth,net,web3,personal,miner  –rpcport 8545 –rpcaddr 127.0.0.1 –allow-insecure-unlock –rpccorsdomain “*” 2&gt;output.log &amp; </p>
<p>// –dev.period 1允许挖矿</p>
<p><a href="https://www.cnblogs.com/lvdongjie/p/11205885.html">https://www.cnblogs.com/lvdongjie/p/11205885.html</a></p>
<p>//–allow-insecure-unlock允许解锁</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Voting DApp&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">        &lt;link href&#x3D;&#39;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css?family&#x3D;Open Sans:400,700&#39; rel&#x3D;&#39;stylesheet&#39; type&#x3D;&#39;text&#x2F;css&#39;&gt;</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;link href&#x3D;&#39;https:&#x2F;&#x2F;maxcdn.bootstrapcdn.com&#x2F;bootstrap&#x2F;3.3.7&#x2F;css&#x2F;bootstrap.min.css&#39; rel&#x3D;&#39;stylesheet&#39; type&#x3D;&#39;text&#x2F;css&#39;&gt;</span><br><span class="line">    &lt;&#x2F;head&gt;</span><br><span class="line">    &lt;body class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">        &lt;h1&gt;A Simple Voting Application&lt;&#x2F;h1&gt;</span><br><span class="line">        &lt;div id&#x3D;&quot;address&quot;&gt;&lt;&#x2F;div&gt; </span><br><span class="line">        &lt;div class&#x3D;&quot;table-responsive&quot;&gt;</span><br><span class="line">            &lt;table class&#x3D;&quot;table table-bordered&quot;&gt;</span><br><span class="line">                &lt;thead&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;th&gt;Candidate&lt;&#x2F;th&gt;</span><br><span class="line">                        &lt;th&gt;Votes&lt;&#x2F;th&gt;</span><br><span class="line">                    &lt;&#x2F;tr&gt;</span><br><span class="line">                &lt;&#x2F;thead&gt;</span><br><span class="line">                &lt;tbody&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;Alice&lt;&#x2F;td&gt;</span><br><span class="line">                        &lt;td id&#x3D;&quot;candidate-1&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;&#x2F;tr&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;Bob&lt;&#x2F;td&gt;</span><br><span class="line">                        &lt;td id&#x3D;&quot;candidate-2&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;&#x2F;tr&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;Cary&lt;&#x2F;td&gt;</span><br><span class="line">                        &lt;td id&#x3D;&quot;candidate-3&quot;&gt;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;&#x2F;tr&gt;</span><br><span class="line">                &lt;&#x2F;tbody&gt;</span><br><span class="line">            &lt;&#x2F;table&gt;</span><br><span class="line">            &lt;div id&#x3D;&quot;msg&quot;&gt;&lt;&#x2F;div&gt; </span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;candidate&quot; &#x2F;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;#&quot; onclick&#x3D;&quot;App.voteForCandidate()&quot; class&#x3D;&quot;btn btn-primary&quot;&gt;Vote&lt;&#x2F;a&gt;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.rawgit.com&#x2F;ethereum&#x2F;web3.js&#x2F;develop&#x2F;dist&#x2F;web3.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;ethereum&#x2F;web3.js&#x2F;dist&#x2F;web3.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;code.jquery.com&#x2F;jquery-3.1.1.slim.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;.&#x2F;index.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">import Web3 from &quot;web3&quot;;</span><br><span class="line">import Voting from &quot;..&#x2F;..&#x2F;build&#x2F;contracts&#x2F;Voting.json&quot;;</span><br><span class="line">let candidates &#x3D; &#123;&quot;Alice&quot;: &quot;candidate-1&quot;, &quot;Bob&quot;: &quot;candidate-2&quot;, &quot;Cary&quot;: &quot;candidate-3&quot;&#125;</span><br><span class="line">const App &#x3D; &#123;</span><br><span class="line">  web3: null,</span><br><span class="line">  account: null,</span><br><span class="line">  vote: null,</span><br><span class="line"></span><br><span class="line">  start: async function() &#123;</span><br><span class="line">    const &#123; web3 &#125; &#x3D; this;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      &#x2F;&#x2F; get contract instance</span><br><span class="line">      const networkId &#x3D; await web3.eth.net.getId();</span><br><span class="line">      const deployedNetwork &#x3D; Voting.networks[networkId];</span><br><span class="line">      &#x2F;&#x2F;console.log(Voting.networks[networkId]);</span><br><span class="line">      this.vote &#x3D; new web3.eth.Contract(</span><br><span class="line">        Voting.abi,</span><br><span class="line">        deployedNetwork.address,</span><br><span class="line">      );</span><br><span class="line">      &#x2F;&#x2F; console.log(Voting.abi);</span><br><span class="line">      &#x2F;&#x2F; console.log(deployedNetwork.address);</span><br><span class="line">      &#x2F;&#x2F; console.log(this.vote);</span><br><span class="line"></span><br><span class="line">      this.refreshVotes();</span><br><span class="line">      &#x2F;&#x2F; get accounts</span><br><span class="line">      const accounts &#x3D; await web3.eth.getAccounts();</span><br><span class="line">      this.account &#x3D; accounts[0];</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F;this.refreshBalance();</span><br><span class="line">    &#125; catch (error) &#123;</span><br><span class="line">      console.error(&quot;Could not connect to contract or chain.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  refreshVotes: async function() &#123;</span><br><span class="line">    const &#123; web3 &#125; &#x3D; this;</span><br><span class="line">    try&#123;</span><br><span class="line">      let candidateNames &#x3D; Object.keys(candidates);  </span><br><span class="line">      for (var i &#x3D; 0; i &lt; candidateNames.length; i++) &#123;   </span><br><span class="line">        let name &#x3D; candidateNames[i];          </span><br><span class="line">        const &#123; totalVotesFor &#125; &#x3D; this.vote.methods;</span><br><span class="line">        &#x2F;&#x2F;console.log(name);</span><br><span class="line">        const value &#x3D; await totalVotesFor(web3.utils.toHex(name)).call();</span><br><span class="line">        &#x2F;&#x2F;console.log(value);</span><br><span class="line">        $(&quot;#&quot; + candidates[name]).html(value.toString()); </span><br><span class="line">      &#125; </span><br><span class="line">    &#125;catch(e)&#123;</span><br><span class="line">      console.error(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  voteForCandidate: async function() &#123;</span><br><span class="line">    const &#123; web3 &#125; &#x3D; this;</span><br><span class="line">    try&#123;</span><br><span class="line">      $(&quot;#msg&quot;).val(&quot;vote submited&quot;);</span><br><span class="line">      let canName &#x3D; $(&quot;#candidate&quot;).val();</span><br><span class="line">      $(&quot;#candidate&quot;).val(&#39;&#39;);</span><br><span class="line">      console.log(canName);</span><br><span class="line">      const &#123; voteForCandidate &#125; &#x3D; this.vote.methods;</span><br><span class="line">      console.log(this.vote.methods);</span><br><span class="line">      console.log(voteForCandidate);</span><br><span class="line">      await voteForCandidate(web3.utils.toHex(canName)).send(&#123; from: this.account &#125;);</span><br><span class="line">      this.refreshVotes();</span><br><span class="line">    &#125;catch(err)&#123;</span><br><span class="line">      console.error(err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.App &#x3D; App;</span><br><span class="line"></span><br><span class="line">window.addEventListener(&quot;load&quot;, function() &#123;</span><br><span class="line">  if (null) &#123;</span><br><span class="line">    $(&quot;#msg&quot;).html(&#39;helo&#39;);</span><br><span class="line">    &#x2F;&#x2F; use MetaMask&#39;s provider</span><br><span class="line">    App.web3 &#x3D; new Web3(window.ethereum);</span><br><span class="line">    window.ethereum.enable(); &#x2F;&#x2F; get permission to access accounts</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    &#x2F;&#x2F; fallback - use your fallback strategy (local node &#x2F; hosted node + in-dapp id mgmt &#x2F; fail)</span><br><span class="line">    App.web3 &#x3D; new Web3(</span><br><span class="line">      new Web3.providers.HttpProvider(&quot;http:&#x2F;&#x2F;127.0.0.1:8545&quot;),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  App.start();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">development: &#123;</span><br><span class="line"> host: &quot;127.0.0.1&quot;,     &#x2F;&#x2F; Localhost (default: none)</span><br><span class="line"> port: 8545,            &#x2F;&#x2F; Standard Ethereum port (default: none)</span><br><span class="line"> network_id: &quot;*&quot;,       &#x2F;&#x2F; Any network (default: none)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Voting &#x3D; artifacts.require(&quot;.&#x2F;Voting.sol&quot;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; function(deployer) &#123;</span><br><span class="line">  deployer.deploy(Voting, [web3.utils.toHex(&#39;Alice&#39;),web3.utils.toHex(&#39;Bob&#39;),web3.utils.toHex(&#39;Cary&#39;)]); </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>(0) 0x1084DF50306Ce706e10eb950C571F833Bc8480b6 (100 ETH)<br>(1) 0xc43eF32Db84cF8EcE3c3ec59610C8c5767219d87 (100 ETH)<br>(2) 0x7fcC051B830F1C781986E8B8225240dF86C9d4AA (100 ETH)<br>(3) 0x892E3b2fc8e0Afa618f9931142f88fA5fff5b4b9 (100 ETH)<br>(4) 0xd8b9375a2640fea9a3262AA21e095dAb6a1ad1eb (100 ETH)<br>(5) 0xd4eAc56BAd7C1f5a01026B98a5fB2393211D2Fe0 (100 ETH)<br>(6) 0x4C3e9e2b9Bca092d7569C005Bd542dB8e281bD44 (100 ETH)<br>(7) 0x94A4dC26Ed361D9b65d81A782b378770Ae825737 (100 ETH)<br>(8) 0xB742F4391435E5B97075cBe073B1B8D51C641298 (100 ETH)<br>(9) 0xA5D19e3eab28a5bD402fc8DBFC6F813afebbab0D (100 ETH)</p>
<h1 id="遇到的错误"><a href="#遇到的错误" class="headerlink" title="遇到的错误"></a>遇到的错误</h1><h2 id="‘webpack-dev-server’-不是内部或外部命令，也不是可运行的程序"><a href="#‘webpack-dev-server’-不是内部或外部命令，也不是可运行的程序" class="headerlink" title="‘webpack-dev-server’ 不是内部或外部命令，也不是可运行的程序"></a>‘webpack-dev-server’ 不是内部或外部命令，也不是可运行的程序</h2><p>命令：<strong><em>npm install webpack-dev-server –save</em></strong></p>
<p><a href="https://blog.csdn.net/hzxOnlineOk/article/details/78284101">https://blog.csdn.net/hzxOnlineOk/article/details/78284101</a></p>
<h2 id="solc的版本问题"><a href="#solc的版本问题" class="headerlink" title="solc的版本问题"></a>solc的版本问题</h2><p>Error: Truffle is currently using solc 0.5.16, but one or more of your contracts specify “pragma solidity ^0.4.18”.<br>Please update your truffle config or pragma statement(s).<br>(See <a href="https://trufflesuite.com/docs/truffle/reference/configuration#compiler-configuration">https://trufflesuite.com/docs/truffle/reference/configuration#compiler-configuration</a> for information on<br>configuring Truffle to use a specific solc compiler version.)</p>
<p>把truffle-config</p>
<p>改成</p>
<p> compilers: {</p>
<p>  solc: {</p>
<p>   version: “0.4.22”,  // Fetch exact version from solc-bin (default: truffle’s version)</p>
<p>   // docker: true,    // Use “0.5.1” you’ve installed locally with docker (default: false)</p>
<p>   // settings: {     // See the solidity docs for advice about optimization and evmVersion</p>
<p>   // optimizer: {</p>
<p>   //  enabled: false,</p>
<p>   //  runs: 200</p>
<p>   // },</p>
<p>   // evmVersion: “byzantium”</p>
<p>   // }</p>
<p>  }</p>
<h2 id="npm错误"><a href="#npm错误" class="headerlink" title="npm错误"></a>npm错误</h2><p>npm install</p>
<h1 id="gaslimit"><a href="#gaslimit" class="headerlink" title="gaslimit"></a>gaslimit</h1><p><a href="https://blog.csdn.net/wo541075754/article/details/79042558">https://blog.csdn.net/wo541075754/article/details/79042558</a></p>
<p>gas limit<br>区块gas limit是单个区块允许的最多gas总量，以此可以用来决定单个区块中能打包多少笔交易。</p>
<p>例如，我们有5笔交易的gas limit分别是10、20、30、40和50.如果区块gas limit是100，那么前4笔交易就能被成功打包进入这个区块。矿工有权决定将哪些交易打包入区块。所以，另一个矿工可以选择打包最后两笔交易进入这个区块（50+40），然后再将第一笔交易打包（10）。如果你尝试将一个会使用超过当前区块gas limit的交易打包，这个交易会被网络拒绝，你的以太坊客户端会反馈错误”交易超过区块gas limit”。</p>
<p>目前使用的gas limit为21000。</p>
<p>区块的gas limit是由在网络上的矿工决定的。与可调整的区块gas limit协议不同的是一个默认的挖矿策略，即大多数客户端默认最小区块gas limit为4,712,388。</p>
<h2 id="ChainId与NetworkId"><a href="#ChainId与NetworkId" class="headerlink" title="ChainId与NetworkId"></a>ChainId与NetworkId</h2><p>ChainId 是用来防止交易在不同的以太坊同构网络进行交易重放的。主要在交易签名和验证的时候使用。</p>
<p>NetworkId 是用来标识区块链网络的。主要在节点之间握手并相互检验的时候使用。</p>
<p>ChainId 需要在 genesis 文件中指定，NetworkId 需要在启动参数中指定。</p>
<p>ChainId 和 NetworkId 的值不需要相同。</p>
<p>链接：<a href="https://www.jianshu.com/p/b8730a05eb36">https://www.jianshu.com/p/b8730a05eb36</a></p>
<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><p><a href="https://www.runoob.com/highcharts/highcharts-column-basic.html">https://www.runoob.com/highcharts/highcharts-column-basic.html</a></p>
<h1 id="在线投票系统php"><a href="#在线投票系统php" class="headerlink" title="在线投票系统php"></a>在线投票系统php</h1><p><a href="https://blog.csdn.net/tianyao9hen/article/details/50495693">https://blog.csdn.net/tianyao9hen/article/details/50495693</a></p>
</div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/02/18/github-clone%E9%80%9F%E5%BA%A6%E6%85%A2%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">github clone速度慢解决办法</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/01/18/%E9%93%BE%E8%A1%A8/"><span class="level-item">链表</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: 'cf6f39497d2328e5bb8e362848d4405c',
            repo: 'Jmlong23.github.io',
            owner: 'Jmlong23',
            clientID: 'bc8a046fee35afa66dfd',
            clientSecret: '657361040368baf39fd80cbe1d911c92eb0bf8c1',
            admin: ["Jmlong23"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.png" alt="topLOW"></figure><p class="title is-size-4 is-block line-height-inherit">topLOW</p><p class="is-size-6 is-block">topLOW的博客</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>广东广州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">45</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#知识背景"><span class="mr-2">1</span><span>知识背景</span></a></li><li><a class="is-flex" href="#基于truffle框架的投票DAPP"><span class="mr-2">2</span><span>基于truffle框架的投票DAPP</span></a><ul class="menu-list"><li><a class="is-flex" href="#安装truffle"><span class="mr-2">2.1</span><span>安装truffle</span></a></li><li><a class="is-flex" href="#创建项目工程"><span class="mr-2">2.2</span><span>创建项目工程</span></a></li><li><a class="is-flex" href="#启动测试链ganache"><span class="mr-2">2.3</span><span>启动测试链ganache</span></a></li><li><a class="is-flex" href="#编译部署"><span class="mr-2">2.4</span><span>编译部署</span></a></li><li><a class="is-flex" href="#控制台交互"><span class="mr-2">2.5</span><span>控制台交互</span></a></li><li><a class="is-flex" href="#网页交互"><span class="mr-2">2.6</span><span>网页交互</span></a></li></ul></li><li><a class="is-flex" href="#geth命令"><span class="mr-2">3</span><span>geth命令</span></a></li><li><a class="is-flex" href="#使用fabric-samples测试网络环境配置"><span class="mr-2">4</span><span>使用fabric-samples测试网络环境配置</span></a></li><li><a class="is-flex" href="#使用Fabric的测试网络"><span class="mr-2">5</span><span>使用Fabric的测试网络</span></a></li><li><a class="is-flex" href="#将智能合约部署到渠道"><span class="mr-2">6</span><span>将智能合约部署到渠道</span></a></li><li><a class="is-flex" href="#安装node"><span class="mr-2">7</span><span>安装node</span></a></li><li><a class="is-flex" href="#编译"><span class="mr-2">8</span><span>编译</span></a></li><li><a class="is-flex" href="#用truffle构建简单dapp"><span class="mr-2">9</span><span>用truffle构建简单dapp</span></a><ul class="menu-list"><li><a class="is-flex" href="#连接到私链的控制台"><span class="mr-2">9.1</span><span>连接到私链的控制台</span></a></li></ul></li><li><a class="is-flex" href="#遇到的错误"><span class="mr-2">10</span><span>遇到的错误</span></a><ul class="menu-list"><li><a class="is-flex" href="#‘webpack-dev-server’-不是内部或外部命令，也不是可运行的程序"><span class="mr-2">10.1</span><span>‘webpack-dev-server’ 不是内部或外部命令，也不是可运行的程序</span></a></li><li><a class="is-flex" href="#solc的版本问题"><span class="mr-2">10.2</span><span>solc的版本问题</span></a></li><li><a class="is-flex" href="#npm错误"><span class="mr-2">10.3</span><span>npm错误</span></a></li></ul></li><li><a class="is-flex" href="#gaslimit"><span class="mr-2">11</span><span>gaslimit</span></a><ul class="menu-list"><li><a class="is-flex" href="#ChainId与NetworkId"><span class="mr-2">11.1</span><span>ChainId与NetworkId</span></a></li></ul></li><li><a class="is-flex" href="#html"><span class="mr-2">12</span><span>html</span></a></li><li><a class="is-flex" href="#在线投票系统php"><span class="mr-2">13</span><span>在线投票系统php</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/c-%E5%AE%89%E5%85%A8%E5%AD%A6/"><span class="level-start"><span class="level-item">c++安全学</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/cpp/"><span class="level-start"><span class="level-item">cpp</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/cpp/c-primer/"><span class="level-start"><span class="level-item">c++ primer</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/java/"><span class="level-start"><span class="level-item">java</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/leetcode/"><span class="level-start"><span class="level-item">leetcode</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/windows%E7%AA%97%E5%8F%A3%E7%A8%8B%E5%BA%8F/"><span class="level-start"><span class="level-item">windows窗口程序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%85%B6%E4%BB%96/"><span class="level-start"><span class="level-item">其他</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">深度学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"><span class="level-start"><span class="level-item">环境搭建</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ftp%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">ftp配置</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"><span class="level-start"><span class="level-item">博客搭建</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%BB%84%E7%BD%91%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">组网技术</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">编译原理</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ArrayList/"><span class="tag">ArrayList</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ftp/"><span class="tag">ftp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hcl/"><span class="tag">hcl</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leetcode/"><span class="tag">leetcode</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"><span class="tag">环境搭建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B8%A9%E5%9D%91/"><span class="tag">踩坑</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2021-04-05T07:08:36.000Z">2021-04-05</time></p><p class="title is-6"><a class="link-muted" href="/2021/04/05/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">mysql学习笔记</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-04-03T13:53:07.000Z">2021-04-03</time></p><p class="title is-6"><a class="link-muted" href="/2021/04/03/js%E5%AD%A6%E4%B9%A0/">js学习</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-03-17T07:18:26.000Z">2021-03-17</time></p><p class="title is-6"><a class="link-muted" href="/2021/03/17/linux%E6%93%8D%E4%BD%9C%E9%9B%86%E5%90%88/">linux操作集合</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/linux/">linux</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-03-10T12:18:53.000Z">2021-03-10</time></p><p class="title is-6"><a class="link-muted" href="/2021/03/10/%E5%89%91%E6%8C%87offer/">剑指offer</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/leetcode/">leetcode</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-02-27T09:14:36.000Z">2021-02-27</time></p><p class="title is-6"><a class="link-muted" href="/2021/02/27/%E7%AC%AC%E4%B8%83%E7%AB%A0-%E7%B1%BB/">第七章 类</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/cpp/">cpp</a> / <a class="link-muted" href="/categories/cpp/c-primer/">c++ primer</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="topLOW的博客" height="28"></a><p class="size-small"><span>&copy; 2021 long</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://sanguocloud.cn',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>